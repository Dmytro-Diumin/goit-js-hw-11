{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n    formBlock: document.querySelector('.form-block'),\n    formElem: document.querySelector('.form-elem'),\n    formInput: document.querySelector('.form-input'),\n    formBtn: document.querySelector('.form-btn'),\n    loader: document.querySelector('.loader-block'),\n    gallery: document.querySelector('.gallery'),\n};\n\nfunction loaderOn() {\n    refs.loader.classList.remove('hidden');\n  }\n  \nfunction loaderOff() {\n    refs.loader.classList.add('hidden');\n  }\n\nrefs.formElem.addEventListener('submit', (e) => {\n    e.preventDefault();\n    refs.gallery.innerHTML = \"\";\n    const searchImg = refs.formInput.value.trim();\n    if (searchImg === \"\" ){\n        return iziToast.show({\n            message: 'You have not entered what to search for',\n            position: 'topRight',\n          });\n    }\n    userSearch(searchImg);\n    e.target.reset();\n})\n\nfunction userSearch(searchImg) {\n    const API_KEY = '42281278-b9f49de06a3dfc9ed42173e47';\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    const PARAMS = `q=${searchImg}&image_type=photo&orientation=horizontal&safesearch=true`;\n    const URL = `${BASE_URL}${END_POINT}?key=${API_KEY}&${PARAMS}`;\n    loaderOn();\n    fetch(URL)\n    .then(res => {\n        if(!res.ok) {\n            throw new Error(res.status);\n        } return res.json();\n    })\n    .then(data => {\n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching\\n your search query. Please try again!',\n                position: 'topRight',\n              });\n            } else {\n            const imagesMarkupRef = data.hits.map(image =>  {\n                return `\n                <li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                  <img\n                    class=\"gallery-image\"\n                    src=\"${image.webformatURL}\"\n                    alt=\"${image.tags}\"\n                  />\n                </a>\n                <div class=\"modal-info\">\n                  <p>Likes <span class=\"gallery-info\">${image.likes}</span></p>\n                  <p>Views <span class=\"gallery-info\">${image.views}</span></p>\n                  <p>Comments <span class=\"gallery-info\">${image.comments}</span></p>\n                  <p>Downloads <span class=\"gallery-info\">${image.downloads}</span></p>\n                </div>\n              </li>`;\n        }).join('');\n        refs.gallery.innerHTML = imagesMarkupRef;\n                let simplelightbox = new SimpleLightbox('.gallery a', options);\n                simplelightbox.refresh();\n            }\n    })\n    .catch(error => {\n        console.error('Error fetching data:', error);\n    })\n    .finally(() => {\n        loaderOff();\n      });\n}\n\nconst options = {\n    captions: true,\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionSelector: \"img\",\n    captionDelay: 250,\n  };"],"names":["refs","loaderOn","loaderOff","e","searchImg","iziToast","userSearch","API_KEY","BASE_URL","END_POINT","PARAMS","URL","res","data","imagesMarkupRef","image","SimpleLightbox","options","error"],"mappings":"6vBAKA,MAAMA,EAAO,CACT,UAAW,SAAS,cAAc,aAAa,EAC/C,SAAU,SAAS,cAAc,YAAY,EAC7C,UAAW,SAAS,cAAc,aAAa,EAC/C,QAAS,SAAS,cAAc,WAAW,EAC3C,OAAQ,SAAS,cAAc,eAAe,EAC9C,QAAS,SAAS,cAAc,UAAU,CAC9C,EAEA,SAASC,GAAW,CAChBD,EAAK,OAAO,UAAU,OAAO,QAAQ,CACtC,CAEH,SAASE,GAAY,CACjBF,EAAK,OAAO,UAAU,IAAI,QAAQ,CACnC,CAEHA,EAAK,SAAS,iBAAiB,SAAWG,GAAM,CAC5CA,EAAE,eAAc,EAChBH,EAAK,QAAQ,UAAY,GACzB,MAAMI,EAAYJ,EAAK,UAAU,MAAM,KAAI,EAC3C,GAAII,IAAc,GACd,OAAOC,EAAS,KAAK,CACjB,QAAS,0CACT,SAAU,UACtB,CAAW,EAEPC,EAAWF,CAAS,EACpBD,EAAE,OAAO,OACb,CAAC,EAED,SAASG,EAAWF,EAAW,CAC3B,MAAMG,EAAU,qCACVC,EAAW,sBACXC,EAAY,QACZC,EAAS,KAAKN,CAAS,2DACvBO,EAAM,GAAGH,CAAQ,GAAGC,CAAS,QAAQF,CAAO,IAAIG,CAAM,GAC5DT,IACA,MAAMU,CAAG,EACR,KAAKC,GAAO,CACT,GAAG,CAACA,EAAI,GACJ,MAAM,IAAI,MAAMA,EAAI,MAAM,EAC5B,OAAOA,EAAI,MACrB,CAAK,EACA,KAAKC,GAAQ,CACV,GAAIA,EAAK,KAAK,SAAW,EACrBR,EAAS,MAAM,CACX,QAAS;AAAA,uCACT,SAAU,UAC1B,CAAe,MACI,CACP,MAAMS,EAAkBD,EAAK,KAAK,IAAIE,GAC3B;AAAA;AAAA,gDAEyBA,EAAM,aAAa;AAAA;AAAA;AAAA,2BAGxCA,EAAM,YAAY;AAAA,2BAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,wDAImBA,EAAM,KAAK;AAAA,wDACXA,EAAM,KAAK;AAAA,2DACRA,EAAM,QAAQ;AAAA,4DACbA,EAAM,SAAS;AAAA;AAAA,oBAGlE,EAAE,KAAK,EAAE,EACVf,EAAK,QAAQ,UAAYc,EACI,IAAIE,EAAe,aAAcC,CAAO,EAC9C,QAAO,CACzB,CACb,CAAK,EACA,MAAMC,GAAS,CACZ,QAAQ,MAAM,uBAAwBA,CAAK,CACnD,CAAK,EACA,QAAQ,IAAM,CACXhB,GACR,CAAO,CACP,CAEA,MAAMe,EAAU,CACZ,SAAU,GACV,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,gBAAiB,MACjB,aAAc,GACf"}